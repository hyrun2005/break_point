{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>{% block title %}Tennis Predictor{% endblock %}</title>
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'players/images/breakpoint_logo.png' %}"/>

    <!-- Tailwind + Flowbite -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet"/>

    <style>
        body {
            font-family: "Montserrat", sans-serif;
        }

        /* ðŸ§© Custom utility classes */
        .lang-fixed_yh {
            width: 170px;
            justify-content: center;
            white-space: nowrap;
        }

        .hover-animated_yh {
            border-radius: 2rem;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .hover-animated_yh:hover {
            background-color: rgba(156, 163, 175, 0.2);
        }

        .rounded_yh,
        .rounded-sm_yh,
        .rounded-md_yh,
        .rounded-lg_yh,
        .rounded-xl_yh,
        .rounded-2xl_yh,
        .rounded-3xl_yh {
            border-radius: 2rem !important;
        }

        .lang-active_yh {
            background-color: rgba(59, 130, 246, 0.7) !important;
            color: white !important;
        }

        .transition-opacity {
            transition: opacity 0.2s ease, transform 0.2s ease;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100 overflow-x-hidden">

<!-- NAVBAR -->
<nav class="bg-gray-800 border-b border-gray-700 relative z-50">
    <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">

        <!-- Logo -->
        <a href="#" class="flex-shrink-0 flex items-center space-x-3 rtl:space-x-reverse">
            <span class="text-2xl font-semibold text-blue-400">BreakPoint</span>
        </a>

        <!-- RIGHT SIDE -->
        <div class="hidden lg:flex items-center lg:order-2 space-x-1 lg:space-x-3 rtl:space-x-reverse">
            <!-- Desktop language selector -->
            <div class="relative flex items-center">
                <button
                        id="lang-desktop-btn"
                        type="button"
                        class="lang-fixed_yh inline-flex items-center font-medium px-4 py-2 text-sm text-gray-200 rounded-lg cursor-pointer hover-animated_yh bg-gray-700"
                >
                    <svg class="w-5 h-5 rounded-full me-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3900 3900">
                        <path fill="#b22234" d="M0 0h7410v3900H0z"/>
                        <path d="M0 450h7410m0 600H0m0 600h7410m0 600H0m0 600h7410m0 600H0" stroke="#fff"
                              stroke-width="300"/>
                        <path fill="#3c3b6e" d="M0 0h2964v2100H0z"/>
                    </svg>
                    English (US)
                </button>

                <!-- Desktop dropdown -->
                <div id="language-dropdown-menu-desktop"
                     class="z-50 hidden absolute top-full mt-2 right-0 min-w-[160px] text-base list-none
                            bg-gray-100 divide-y divide-gray-200 rounded-lg shadow dark:bg-gray-800 transition-opacity duration-200">

                    <ul class="py-2 font-medium text-gray-800 dark:text-gray-100" role="none">
                        <li><a href="#" class="block px-4 py-2 hover:bg-blue-500 hover:text-white rounded">English (US)</a></li>
                        <li><a href="#" class="block px-4 py-2 hover:bg-blue-500 hover:text-white rounded">Deutsch</a></li>
                        <li><a href="#" class="block px-4 py-2 hover:bg-blue-500 hover:text-white rounded">Italiano</a></li>
                        <li><a href="#" class="block px-4 py-2 hover:bg-blue-500 hover:text-white rounded">Polski</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Mobile burger -->
        <div class="lg:hidden flex items-center">
            <button data-collapse-toggle="navbar-language" type="button"
                    class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-200 rounded-lg hover-animated_yh">
                <span class="sr-only">Open main menu</span>
                <svg class="w-5 h-5" fill="none" viewBox="0 0 17 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                          stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/>
                </svg>
            </button>
        </div>

        <!-- NAV LINKS -->
        <div class="items-center justify-between hidden w-full lg:flex lg:w-auto lg:order-1" id="navbar-language">
            <ul class="flex flex-col p-4 lg:p-0 mt-4 font-medium border border-gray-700 rounded-lg bg-gray-800 lg:flex-row lg:space-x-8 lg:mt-0 lg:border-0 lg:bg-transparent">

                <li><a href="{% url 'players:home' %}" class="block py-2 px-3 text-gray-200 hover:text-blue-400 transition hover-animated_yh">Home</a></li>

                <li class="relative group">
                    <button type="button"
                            class="hidden lg:flex items-center py-2 px-3 text-gray-200 hover:text-blue-400 transition hover-animated_yh">
                        Rating
                        <svg class="w-3 h-3 ml-2 transition-transform duration-200 group-hover:rotate-180"
                             xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="m1 1 4 4 4-4"/>
                        </svg>
                    </button>

                    <div class="hidden lg:block absolute left-0 mt-2 bg-gray-800 border border-gray-700 rounded-2xl shadow-lg opacity-0 group-hover:opacity-100 group-hover:translate-y-1 transition-all duration-200">
                        <ul class="py-2 text-sm text-gray-200 w-40">
                            <li><a href="{% url 'players:atp_rating' %}"
                                   class="block px-4 py-2 hover:bg-blue-500 hover:text-white rounded">ATP Rating</a></li>
                            <li><a href="#" class="block px-4 py-2 hover:bg-blue-500 hover:text-white rounded">WTA Rating</a></li>
                        </ul>
                    </div>

                    <button type="button" id="mobileRatingBtn"
                            class="flex lg:hidden items-center justify-between w-full py-2 px-3 text-gray-200 hover:text-blue-400 transition hover-animated_yh">
                        Rating
                        <svg class="w-3 h-3 ml-2 transition-transform duration-200" id="ratingArrow"
                             xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="m1 1 4 4 4-4"/>
                        </svg>
                    </button>

                    <ul id="mobileRatingMenu" class="hidden flex-col pl-6 mt-1 space-y-1">
                        <li><a href="{% url 'players:atp_rating' %}"
                               class="block py-2 px-3 text-gray-200 hover:text-blue-400 transition hover-animated_yh">ATP Rating</a></li>
                        <li><a href="#"
                               class="block py-2 px-3 text-gray-200 hover:text-blue-400 transition hover-animated_yh">WTA Rating</a></li>
                    </ul>
                </li>

                <li><a href="{% url 'predictions:predict' %}"
                       class="block py-2 px-3 text-gray-200 hover:text-blue-400 transition hover-animated_yh">Prediction</a></li>

                <li><a href="#" class="block py-2 px-3 text-gray-200 hover:text-blue-400 transition hover-animated_yh">Contact Us</a></li>

                <!-- Language (mobile only) -->
                <li class="lg:hidden border-t border-gray-700 mt-3 pt-3">
                    <div class="relative flex items-center justify-center">
                        <button
                                id="lang-mobile-btn"
                                type="button"
                                class="lang-fixed_yh inline-flex items-center font-medium px-4 py-2 text-sm text-gray-200 rounded-lg cursor-pointer hover-animated_yh bg-gray-700"
                        >
                            <svg class="w-5 h-5 rounded-full me-2" xmlns="http://www.w3.org/2000/svg"
                                 viewBox="0 0 3900 3900">
                                <path fill="#b22234" d="M0 0h7410v3900H0z"/>
                                <path d="M0 450h7410m0 600H0m0 600h7410m0 600H0m0 600h7410m0 600H0" stroke="#fff"
                                      stroke-width="300"/>
                                <path fill="#3c3b6e" d="M0 0h2964v2100H0z"/>
                            </svg>
                            English (US)
                        </button>

                        <div id="language-dropdown-menu-mobile" class="z-50 hidden absolute top-full mt-2 right-0 min-w-[160px] text-base list-none
                        bg-gray-100 divide-y divide-gray-200 rounded-lg shadow dark:bg-gray-800 transition-opacity duration-200">

                            <ul class="py-2 font-medium text-gray-800 dark:text-gray-100" role="none">
                                <li><a href="#" class="block px-4 py-2 hover:bg-blue-500 hover:text-white rounded">English (US)</a></li>
                                <li><a href="#" class="block px-4 py-2 hover:bg-blue-500 hover:text-white rounded">Deutsch</a></li>
                                <li><a href="#" class="block px-4 py-2 hover:bg-blue-500 hover:text-white rounded">Italiano</a></li>
                                <li><a href="#" class="block px-4 py-2 hover:bg-blue-500 hover:text-white rounded">Polski</a></li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- MAIN -->
<main class="min-h-screen bg-gray-50 dark:bg-gray-900">
    {% block content %}
        <div class="text-center pt-24">
            <h1 class="text-3xl font-semibold text-blue-400">Welcome to BreakPoint ðŸŽ¾</h1>
        </div>
    {% endblock %}
</main>

<!-- FOOTER -->
<footer class="bg-gray-800 text-gray-300 py-6 text-center text-sm mt-10 border-t border-gray-700">
    <p>Â© 2025 BreakPoint â€” Created by Vistula University Student</p>
</footer>

<!-- SCRIPT -->
<script>
    function setupLanguageMenu(buttonSelector, menuSelector) {
        const button = document.querySelector(buttonSelector);
        const menu = document.getElementById(menuSelector);
        const items = menu.querySelectorAll("a");

        const flags = {
            'English (US)': `<svg class="w-5 h-5 rounded-full me-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3900 3900"><path fill="#b22234" d="M0 0h7410v3900H0z"/><path d="M0 450h7410m0 600H0m0 600h7410m0 600H0m0 600h7410m0 600H0" stroke="#fff" stroke-width="300"/><path fill="#3c3b6e" d="M0 0h2964v2100H0z"/></svg>`,
            'Deutsch': `<svg class="w-5 h-5 rounded-full me-2" viewBox="0 0 512 512"><path fill="#000" d="M0 0h512v170.7H0z"/><path fill="#D00" d="M0 170.7h512v170.6H0z"/><path fill="#FFCE00" d="M0 341.3h512V512H0z"/></svg>`,
            'Italiano': `<svg class="w-5 h-5 rounded-full me-2" viewBox="0 0 512 512"><path fill="#009246" d="M0 0h170.7v512H0z"/><path fill="#fff" d="M170.7 0h170.6v512H170.7z"/><path fill="#CE2B37" d="M341.3 0H512v512H341.3z"/></svg>`,
            'Polski': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205.46 143.18" class="w-5 h-5 rounded-full me-2"><path fill="#fff" d="M0 0h205.46v71.59H0z"/><path fill="#dc143c" d="M0 71.59h205.46v71.59H0z"/></svg>`
        };

        items.forEach(item => {
            item.addEventListener('click', e => {
                e.preventDefault();
                const selectedLang = item.textContent.trim();
                items.forEach(i => i.classList.remove('lang-active_yh'));
                item.classList.add('lang-active_yh');
                const flag = flags[selectedLang] || flags['English (US)'];
                button.innerHTML = flag + selectedLang;
                localStorage.setItem('preferredLang', selectedLang);
                menu.classList.add('hidden');
            });
        });

        const savedLang = localStorage.getItem('preferredLang') || 'English (US)';
        const savedFlag = flags[savedLang] || flags['English (US)'];
        button.innerHTML = savedFlag + savedLang;
        items.forEach(i => {
            if (i.textContent.trim() === savedLang) i.classList.add('lang-active_yh');
        });
    }

    document.getElementById('lang-desktop-btn').addEventListener('click', () => {
        document.getElementById('language-dropdown-menu-desktop').classList.toggle('hidden');
    });
    document.getElementById('lang-mobile-btn').addEventListener('click', () => {
        document.getElementById('language-dropdown-menu-mobile').classList.toggle('hidden');
    });

    document.addEventListener('click', (e) => {
        ['desktop', 'mobile'].forEach(type => {
            const btn = document.getElementById(`lang-${type}-btn`);
            const menu = document.getElementById(`language-dropdown-menu-${type}`);
            if (!btn.contains(e.target) && !menu.contains(e.target)) {
                menu.classList.add('hidden');
            }
        });
    });

    setupLanguageMenu('#lang-desktop-btn', 'language-dropdown-menu-desktop');
    setupLanguageMenu('#lang-mobile-btn', 'language-dropdown-menu-mobile');

    const mobileRatingBtn = document.getElementById('mobileRatingBtn');
    const mobileRatingMenu = document.getElementById('mobileRatingMenu');
    const ratingArrow = document.getElementById('ratingArrow');
    mobileRatingBtn.addEventListener('click', () => {
        mobileRatingMenu.classList.toggle('hidden');
        ratingArrow.classList.toggle('rotate-180');
    });
</script>
</body>
</html>
